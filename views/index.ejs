<!DOCTYPE html>
<html>
    <head>
        <title><%= title %></title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
        <link href="/css/style.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <style>
            .top-section {
                background: linear-gradient(135deg, rgba(0, 161, 255, 0.4), rgba(0, 255, 143, 0.4)), url('/images/background.jpg');
                background-size: cover;
                background-position: center;
                min-height: 70vh;
                display: flex;
                align-items: center;
                color: white;
            }
            .feature-card {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .feature-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            }
            .stats-counter {
                font-size: 2.5rem;
                font-weight: bold;
                color: #007bff;
            }
            .cta-section {
                background: linear-gradient(45deg, #007bff, #28a745);
                color: white;
            }
        </style>
    </head>
    <body>
        <%- include('partials/navbar') %>

        <!-- Top Section -->
        <section class="top-section">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-8">
                        <h1 class="display-3 fw-bold mb-4">Transform Your Life at <span class="text-warning">KineGit</span></h1>
                        <p class="lead mb-4 fs-4">Experience fitness like never before with state-of-the-art equipment, expert trainers, and a community that motivates you to achieve your goals.</p>
                        
                        <% if (messages && messages.length > 0) { %>
                            <div class="alert alert-success border-0 rounded-3 mb-4">
                                <% messages.forEach(function(message) { %>
                                    <p class="mb-0"><i class="bi bi-check-circle-fill me-2"></i><%= message %></p>
                                <% }); %>
                            </div>
                        <% } %>

                        <div class="d-flex gap-3 flex-wrap mb-4">
                            <% if (user) { %>
                                <a href="/userDashboard" class="btn btn-warning btn-lg px-4 py-3">
                                    <i class="bi bi-speedometer2 me-2"></i>My Dashboard
                                </a>
                                <a href="/classes" class="btn btn-outline-light btn-lg px-4 py-3">
                                    <i class="bi bi-calendar-event me-2"></i>Browse Classes
                                </a>
                            <% } else { %>
                                <a href="/register" class="btn btn-warning btn-lg px-4 py-3">
                                    <i class="bi bi-person-plus me-2"></i>Join KineGit Today
                                </a>
                                <a href="/login" class="btn btn-outline-light btn-lg px-4 py-3">
                                    <i class="bi bi-box-arrow-in-right me-2"></i>Member Login
                                </a>
                            <% } %>
                        </div>

                        <!-- Quick Stats -->
                        <div class="row text-center mt-5">
                            <div class="col-md-4">
                                <div class="text-warning display-6 fw-bold"><%= stats.totalLocations %></div>
                                <div class="small">Premium Locations</div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-warning display-6 fw-bold"><%= stats.totalClasses %></div>
                                <div class="small">Active Classes</div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-warning display-6 fw-bold"><%= stats.totalMembers %>+</div>
                                <div class="small">Happy Members</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 text-center">
                        <div class="bg-white bg-opacity-10 p-4 rounded-4 backdrop-blur">
                            <h4 class="mb-3">Ready to Start?</h4>
                            <div class="list-group list-group-flush">
                                <a href="/locations" class="list-group-item list-group-item-action bg-transparent text-white border-light">
                                    <i class="bi bi-geo-alt me-2"></i>Find Locations
                                </a>
                                <a href="/rooms" class="list-group-item list-group-item-action bg-transparent text-white border-light">
                                    <i class="bi bi-door-open me-2"></i>Explore Facilities
                                </a>
                                <a href="/classes" class="list-group-item list-group-item-action bg-transparent text-white border-light">
                                    <i class="bi bi-calendar-event me-2"></i>View Classes
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="py-5 bg-light">
            <div class="container">
                <div class="text-center mb-5">
                    <h2 class="display-5 fw-bold text-primary mb-3">Why Choose KineGit?</h2>
                    <p class="lead text-muted">Discover what makes us the premier fitness destination</p>
                </div>

                <div class="row g-4">
                    <div class="col-md-6 col-lg-3">
                        <div class="card border-0 shadow-sm h-100 feature-card">
                            <div class="card-body text-center p-4">
                                <div class="display-4 text-primary mb-3">üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
                                <h5 class="card-title">Modern Equipment</h5>
                                <p class="card-text">State-of-the-art fitness equipment from leading brands, regularly maintained for optimal performance.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3">
                        <div class="card border-0 shadow-sm h-100 feature-card">
                            <div class="card-body text-center p-4">
                                <div class="display-4 text-success mb-3">üë®‚Äçüíº</div>
                                <h5 class="card-title">Expert Trainers</h5>
                                <p class="card-text">Certified personal trainers with years of experience to guide your fitness journey safely and effectively.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3">
                        <div class="card border-0 shadow-sm h-100 feature-card">
                            <div class="card-body text-center p-4">
                                <div class="display-4 text-warning mb-3">‚è∞</div>
                                <h5 class="card-title">Flexible Hours</h5>
                                <p class="card-text">Extended operating hours and 24/7 access for premium members to fit your busy lifestyle.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3">
                        <div class="card border-0 shadow-sm h-100 feature-card">
                            <div class="card-body text-center p-4">
                                <div class="display-4 text-info mb-3">üéØ</div>
                                <h5 class="card-title">Diverse Classes</h5>
                                <p class="card-text">From high-intensity cardio to relaxing yoga, find the perfect class for every fitness level and goal.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Locations Preview -->
        <% if (locations && locations.length > 0) { %>
        <section class="py-5 bg-light">
            <div class="container">
                <div class="text-center mb-5">
                    <h2 class="display-5 fw-bold text-primary mb-3">Our Locations</h2>
                    <p class="lead text-muted">Find the KineGit branch nearest to you</p>
                </div>

                <div class="row g-4">
                    <% locations.forEach(function(location, index) { 
                        const colors = ['primary', 'success', 'warning'];
                        const colorClass = colors[index % colors.length];
                    %>
                        <div class="col-md-6 col-lg-4">
                            <div class="card border-0 shadow-sm h-100 feature-card">
                                <div class="card-header bg-<%= colorClass %> text-<%= colorClass === 'warning' ? 'dark' : 'white' %>">
                                    <h6 class="mb-0">
                                        <i class="bi bi-geo-alt-fill me-2"></i><%= location.name %> Branch
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <img src="/images/branchesImg/<%= location.image %>" 
                                             alt="<%= location.name %> Branch" 
                                             class="img-fluid rounded" 
                                             style="height: 180px; width: 100%; object-fit: cover;">
                                    </div>
                                    <p class="card-text">
                                        <i class="bi bi-building me-2 text-<%= colorClass %>"></i>
                                        <%= location.address %>
                                    </p>
                                    <p class="card-text small text-muted">
                                        <i class="bi bi-clock me-1"></i>Mon-Fri: 5AM-12AM | Sat-Sun: 6AM-11PM | <span class="text-success">24/7 Premium Access</span>
                                    </p>
                                    <div class="mt-3">
                                        <a href="/rooms?location=<%= location.name.toLowerCase().replace(/\s+/g, '-') %>" class="btn btn-outline-<%= colorClass %> me-2 btn-sm">
                                            <i class="bi bi-door-open me-1"></i>View Rooms
                                        </a>
                                        <a href="/classes?location=<%= location.name.toLowerCase().replace(/\s+/g, '-') %>" class="btn btn-<%= colorClass %> btn-sm">
                                            <i class="bi bi-calendar-event me-1"></i>Classes
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                </div>

                <div class="text-center mt-4">
                    <a href="/locations" class="btn btn-primary btn-lg">
                        <i class="bi bi-geo-alt me-2"></i>View All Locations
                    </a>
                </div>
            </div>
        </section>
        <% } %>

        <!-- Upcoming Classes Preview -->
        <% if (upcomingClasses && upcomingClasses.length > 0) { %>
        <section class="py-5 bg-light">
            <div class="container">
                <div class="text-center mb-5">
                    <h2 class="display-5 fw-bold text-primary mb-3">Upcoming Classes</h2>
                    <p class="lead text-muted">Join our next fitness sessions</p>
                </div>

                <div class="row g-4">
                    <% upcomingClasses.forEach(function(classItem, index) { 
                        const classTypes = {
                            'cardio': { icon: 'bi-heart-pulse', color: 'danger' },
                            'strength': { icon: 'bi-lightning-charge', color: 'warning' },
                            'zumba': { icon: 'bi-music-note-beamed', color: 'success' }
                        };
                        
                        const classType = classItem.class_type.toLowerCase();
                        const typeInfo = classTypes[classType] || { icon: 'bi-star', color: 'primary' };
                        const startDate = new Date(classItem.class_start_time);
                    %>
                        <div class="col-md-6 col-lg-4">
                            <div class="card border-0 shadow-sm h-100 feature-card">
                                <div class="card-header bg-<%= typeInfo.color %> text-white">
                                    <h6 class="mb-0">
                                        <i class="<%= typeInfo.icon %> me-2"></i><%= classItem.class_name %>
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-2">
                                        <small class="text-muted">
                                            <i class="bi bi-calendar me-1"></i><%= startDate.toLocaleDateString('en-SG', { weekday: 'short', month: 'short', day: 'numeric' }) %>
                                            <i class="bi bi-clock ms-2 me-1"></i><%= startDate.toLocaleTimeString('en-SG', { hour: '2-digit', minute: '2-digit' }) %>
                                        </small>
                                    </div>
                                    <p class="mb-2">
                                        <i class="bi bi-person-badge me-1 text-<%= typeInfo.color %>"></i><%= classItem.instructor_name %>
                                    </p>
                                    <p class="mb-3">
                                        <i class="bi bi-geo-alt me-1 text-<%= typeInfo.color %>"></i><%= classItem.location_name %> - <%= classItem.room_name %>
                                    </p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="badge bg-<%= classItem.available_spots > 10 ? 'success' : classItem.available_spots > 5 ? 'warning' : 'danger' %>">
                                            <%= classItem.available_spots %> spots left
                                        </span>
                                        <% if (user) { %>
                                            <% if (classItem.available_spots > 0) { %>
                                                <form method="POST" action="/book-class" style="display: inline;">
                                                    <input type="hidden" name="classId" value="<%= classItem.class_id %>">
                                                    <button type="submit" class="btn btn-<%= typeInfo.color %> btn-sm">Book Now</button>
                                                </form>
                                            <% } else { %>
                                                <button class="btn btn-secondary btn-sm" disabled>Class Full</button>
                                            <% } %>
                                        <% } else { %>
                                            <a href="/login" class="btn btn-<%= typeInfo.color %> btn-sm">Login to Book</a>
                                        <% } %>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                </div>

                <div class="text-center mt-4">
                    <a href="/classes" class="btn btn-primary btn-lg">
                        <i class="bi bi-calendar-event me-2"></i>View All Classes
                    </a>
                </div>
            </div>
        </section>
        <% } %>

        <!-- Call to Action Section -->
        <section class="cta-section py-5">
            <div class="container text-center">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <h2 class="display-4 fw-bold mb-4">Ready to Transform Your Life?</h2>
                        <p class="lead mb-4">Join thousands of members who have already started their fitness journey with KineGit. Your transformation begins today!</p>
                        
                        <div class="d-flex gap-3 justify-content-center flex-wrap">
                            <% if (!user) { %>
                                <a href="/register" class="btn btn-light btn-lg px-5 py-3">
                                    <i class="bi bi-person-plus me-2"></i>Join Now
                                </a>
                                <a href="/locations" class="btn btn-outline-light btn-lg px-5 py-3">
                                    <i class="bi bi-geo-alt me-2"></i>Find Location
                                </a>
                            <% } else { %>
                                <a href="/classes" class="btn btn-light btn-lg px-5 py-3">
                                    <i class="bi bi-calendar-event me-2"></i>Book a Class
                                </a>
                                <a href="/userDashboard" class="btn btn-outline-light btn-lg px-5 py-3">
                                    <i class="bi bi-speedometer2 me-2"></i>My Dashboard
                                </a>
                            <% } %>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-dark text-light py-4">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <h5 class="text-primary">KineGit Fitness</h5>
                        <p class="mb-0">Transform your life through fitness. Your journey starts here.</p>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <div class="d-flex gap-3 justify-content-md-end">
                            <a href="/locations" class="text-light text-decoration-none">Locations</a>
                            <a href="/classes" class="text-light text-decoration-none">Classes</a>
                            <a href="/rooms" class="text-light text-decoration-none">Facilities</a>
                            <% if (!user) { %>
                                <a href="/register" class="text-light text-decoration-none">Join Us</a>
                            <% } %>
                        </div>
                    </div>
                </div>
                <hr class="my-3">
                <div class="text-center">
                    <small>&copy; 2025 KineGit Fitness. All rights reserved.</small>
                </div>
            </div>
        </footer>
    </body>
</html>